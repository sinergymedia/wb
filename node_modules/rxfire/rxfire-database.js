!function(l,u,o){"use strict";function c(n,r){return new u.Observable(function(t){var e=n.on(r,function(e,n){t.next({snapshot:e,prevKey:n,event:r})},t.error.bind(t));return{unsubscribe:function(){n.off(r,e)}}}).pipe(o.delay(0))}var e;function r(e){return null!=e&&0!==e.length||(e=[l.ListenEvent.added,l.ListenEvent.removed,l.ListenEvent.changed,l.ListenEvent.moved]),e}(e=l.ListenEvent||(l.ListenEvent={})).added="child_added",e.removed="child_removed",e.changed="child_changed",e.moved="child_moved",e.value="value";var i=function(){return(i=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e}).apply(this,arguments)};function t(e,n){var t;return i({},e.snapshot.val(),n?((t={})[n]=e.snapshot.key,t):null)}function a(a,e){var n,s=r(e);return(n=a,u.from(n.once(l.ListenEvent.value)).pipe(o.map(function(e){return{snapshot:e,prevKey:null,event:l.ListenEvent.value}}))).pipe(o.switchMap(function(e){for(var n=[u.of(e)],t=0,r=s;t<r.length;t++){var i=r[t];n.push(c(a,i))}return u.merge.apply(void 0,n).pipe(o.scan(v,[]))}),o.distinctUntilChanged())}function p(e,n){for(var t=e.length,r=0;r<t;r++)if(e[r].snapshot.key===n)return r;return-1}function v(t,n){var r=n.snapshot,e=n.prevKey,i=n.event,a=r.key,s=p(t,a),u=function(e,n){if(null==n)return 0;var t=p(e,n);return-1===t?e.length:t+1}(t,e||void 0);switch(i){case l.ListenEvent.value:if(n.snapshot&&n.snapshot.exists()){var o=null;n.snapshot.forEach(function(e){var n={snapshot:e,event:l.ListenEvent.value,prevKey:o};return o=e.key,t=t.concat([n]),!1})}return t;case l.ListenEvent.added:if(-1<s){var c=t[s-1];(c&&c.snapshot.key||null)!==e&&(t=t.filter(function(e){return e.snapshot.key!==r.key})).splice(u,0,n)}else{if(null==e)return[n].concat(t);(t=t.slice()).splice(u,0,n)}return t;case l.ListenEvent.removed:return t.filter(function(e){return e.snapshot.key!==r.key});case l.ListenEvent.changed:return t.map(function(e){return e.snapshot.key===a?n:e});case l.ListenEvent.moved:if(-1<s){var v=t.splice(s,1)[0];return(t=t.slice()).splice(u,0,v),t}return t;default:return t}}l.changeToData=t,l.fromRef=c,l.list=a,l.listVal=function(e,n){return a(e).pipe(o.map(function(e){return e.map(function(e){return t(e,n)})}))},l.object=function(e){return c(e,l.ListenEvent.value)},l.objectVal=function(e,n){return c(e,l.ListenEvent.value).pipe(o.map(function(e){return t(e,n)}))},l.stateChanges=function(n,e){var t=(e=r(e)).map(function(e){return c(n,e)});return u.merge.apply(void 0,t)}}(this.rxfire=this.rxfire||{},rxjs,rxjs.operators);
//# sourceMappingURL=rxfire-database.js.map
